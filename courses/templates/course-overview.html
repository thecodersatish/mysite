{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Meta -->
    <meta name="description" content="">
    <meta name="author" content="Themepixels">

    <!-- Favicon -->
    <!-- <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.png"> -->

    <title>{{course.name}}</title>

    <!-- Vendor CSS -->
    <link href="lib/remixicon/fonts/remixicon.css" rel="stylesheet">
    
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Template CSS -->
    <link rel="stylesheet" href="{% static 'assets/css/overview.css' %}">
    <link rel="stylesheet" href="{% static 'common/assets/css/style.css' %}">
  </head>
  <body >
      <!-- As a link -->
    <nav class="navbar navbar-expand-lg navbar-dark text-white shadow-sm">
        <div class="container-fluid">
          <a class="navbar-brand" href="{% url 'home' %}"><i class="fa fa-home"></i> CodeHub</a>
        </div>
    </nav>
    <div class="container-fluid">
        <br>
        <h4>{{course.name}}</h4>
        <div class="row">
            <div class="col-md-3">
                
            </div>
            <div class="col-md-6"> 
                <h4>Modules</h4>
                {% for module in modules %}
                <div class="col-12 module d-flex flex-row justify-content-between" name="module" id="{{module.code}}">
                    <div>
                        <h5>{{forloop.counter}}. {{module.name}}</h5>
                    </div>
                    <div>
                        <img src="{% static '/assets/img/check.png' %}" style="height: 20px;" />
                    </div>
                </div>
                <div id="{{module.code}}contents" name="contents" class="row gy-2 gx-2" style="display: none;margin-bottom: 10px;" > 
                    <div class="col-6 col-md-4">
                        <div class="card module-topics" name="videos" id="{{module.code}}">
                            <div class="card-header">
                              Videos
                            </div>
                            <div class="card-body text-center">
                                <img src="{% static 'assets/img/play.png' %}" class="icon-edit"/>
                            </div>
                          </div>
                    </div>
                    <div class="col-6 col-md-4">
                        <div class="card module-topics" name="quiz" id="{{module.code}}">
                            <div class="card-header">
                              Quiz
                            </div>
                            <div class="card-body text-center">
                                <img src="{% static 'assets/img/quiz.png' %}" class="icon-edit"/>
                            </div>
                          </div>
                    </div>
                    <div class="col-6 col-md-4">
                        <div class="card module-topics" name="rearrange" id="{{module.code}}">
                            <div class="card-header">
                              Re-arrange
                            </div>
                            <div class="card-body text-center">
                                <img src="{% static 'assets/img/Rearrange.png' %}" class="icon-edit" />
                            </div>
                          </div>
                    </div>
                    <div class="col-6 col-md-4">
                        <div class="card module-topics" name="problems" id="{{module.code}}">
                            <div class="card-header">
                              Handson
                            </div>
                            <div class="card-body text-center">
                                <img src="{% static 'assets/img/code.png' %}" class="icon-edit"/>
                            </div>
                          </div>
                    </div>
                    <div class="col-6 col-md-4">
                        <div class="card module-topics" name="assessment" id="{{module.code}}">
                            <div class="card-header">
                              Assessment
                            </div>
                            <div class="card-body text-center">
                                <img src="{% static 'assets/img/terminal.png' %}" class="icon-edit"/>
                            </div>
                          </div>
                    </div>
                </div>
                {% endfor %}
                <br/>
            </div>
            <div class="col-md-3">
                
            </div>
        </div>

    </div>
    <script>
        $(function(){
            $("div[name='module']").on('click',function(){
                $('#'+this.id+"contents").toggle();
            });
            $('div[name="quiz"]').on('click',function(){
                window.location.href = "/courses/{{course.code}}/module/"+this.id+"/quiz";
            });
            $('div[name="rearrange"]').on('click',function(){
                window.location.href = "/courses/{{course.code}}/module/"+this.id+"/rearrange";
            });
            $('div[name="problems"]').on('click',function(){
                window.location.href = "/courses/{{course.code}}/module/"+this.id+"/problems";
            });
            $('div[name="assessment"]').on('click',function(){
                window.location.href = "/courses/{{course.code}}/module/"+this.id+"/assessment";
            });
            setInterval(function(){
                $.ajax({
                url : "{% url 'questions_completed' %}", // the endpoint
                type : "POST", // http method
                data : {course:'{{course.code}}'}, // data sent with the post request
                // handle a successful response
                success : function(json) {
                    $('#questions_completed').html(json['questions_completed']);
                },

                // handle a non-successful response
                error : function(xhr,errmsg,err) {
                    alert(response["responseJSON"]["error"]);
                }
            });
            },5000);
        });
    </script>
  </body>